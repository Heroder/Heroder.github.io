<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>详情页</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/shopping.css">
</head>
<body>
     <!-- 导航栏 -->
     <div id="navi">
        <div class="common">
            <ul class="s-sub">
                <li><a href="../index.html">首页</a></li>
                <li><a href="#">华为官网</a></li>
                <li><a href="#">荣耀官网</a></li>
                <li><a href="#">花粉俱乐部</a></li>
                <li><a href="#">V码(优购码)</a></li>
                <li><a href="#">企业购</a></li>
                <li><a href="#">Select Region</a></li>
                <li class="s-dom">
                    <div class="h">
                        <a href="#" class="icon-dropdown">更多精彩</a>
                    </div>
                    <dl class="shortcut-menu">
                        <dt><a href="">EMUI</a></dt>
                        <!-- <dt><a href="">应用市场</a></dt> -->
                        <dt><a href="">华为终端云空间</a></dt>
                        <dt><a href="">开发者联明</a></dt>
                    </dl>
                </li>
            </ul>
            <ul class="s-main">
                <li><a href="./html/register.html">请登录</a></li>
                <li><a href="./html/enroll.html">注册</a></li>
                <li><a href="#">我的订单</a></li>
                <li class="menu-one">
                    <div class="h">
                        <a href="#" class="icon-dropdown">客户服务</a>
                    </div>
                    <dl class="menu-two">
                        <dt><a href="#">服务中心</a></dt>
                        <dt><a href="#">联系客服</a></dt>
                    </dl>
                </li>
                <li class="menu-seven">
                    <div class="h">
                        <a href="#" class="icon-dropdown">网站导航</a>
                    </div>
                    <div class="f">
                        <a href="">
                            <dl class="picture">
                                <dt></dt>
                                <dd>商城首页</dd>
                            </dl>
                        </a>
                        <dl class="channel">
                            <dt>频道</dt>
                            <a href="#">华为专区</a>
                            <a href="#">荣耀专区</a><br />
                            <a href="#">企业购</a>
                        </dl>
                    </div>
                </li>
                <li class="menu-four">
                    <div class="h">
                        <a href="#" class="icon-dropdown">手机版</a>
                    </div>
                </li>
                <li>
                    <div class="shortcut">
                        <a href="./cart.html" class="icon-minicart">
                            <span>购物车</span>
                            <span>(0)</span>
                        </a>
                        <div class="shortcut-meni">
                            <p><span></span></p>
                            <p class="null">你的购物车是空的，赶紧选购吧~</p>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
   
    <!-- 头部 -->
    <div id="header" class="common">
        <div class="logo">
            <a href=""><img src="https://res.vmallres.com/pimages//common/config/logo/SXppnESYv4K11DBxDFc2.png"
                    alt=""></a>
        </div>
        <ul class="nave-center">
            <li class="img">
                <a href="#">
                    <img src="https://res.vmallres.com/pimages//navigation/icon/GrguiqzHENWVYHYWyHBM.png" alt="">
                </a>
            </li>
            <li class="img">
                <a href="#">
                    <img src="https://res.vmallres.com/pimages//navigation/icon/AHwTUFRpDSQyuIZ7tLJz.png" alt="">
            </li>
            <li>
                <a href="#">
                    <span>P40系列</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <span>荣耀30</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <span>智能家居</span>
                </a>
            </li>
        </ul>
        <div class="search">
            <form action="">
                <input type="text" class="txt">
                <input type="button" class="btn btn-picture">
                <div class="search-bar">
                    <a href="#">Mate40系列</a>
                    <a href="#">WATHCH FIT</a>
                </div>
            </form>
        </div>
    </div>
    <div class="hr"></div>
    <!--  -->
    <div class="breadcrumb-area common">
        <a href="#">首页</a>
        &nbsp; > &nbsp;
        <a href="#">手机</a>
        &nbsp; > &nbsp;
        <a href="#">HUAWEI nova系列</a>
        &nbsp; > &nbsp;
        <span>HUAWEI nova 8 Pro 8GB+128GB 全网通版（亮黑色）</span>
    </div>
    <div class="hr"></div>
    <!-- 放大镜 -->
    <div id="glass">
        <div class="glass-left">
            <div class="glass-img" code=2>
                <a href="#">
                    <img src="https://res1.vmallres.com/pimages//product/6941487208081/428_428_09DFA911A97EFB4032A8BDD9C68C192FCA41FE0F90663A57mp.png"   class="arr" >
                </a>
              
                <div class="glass-zomm-lens"></div>
                <div class="glass-zoom-big">
                    <img src="https://res.vmallres.com/pimages//product/6941487211210/group//800_800_028F9FE8B15A8D90FF0C49FB7C36E97F6FFDBAC1C3F0F633.png" alt="" class="bigimg">
                </div>
            </div>
            <!--  -->
            <div class="product-gallery">
                <a href="#" class="product-gallery-back"></a>
                <div class="product-gallery-thumbs">
                    <ul class="nt">
                        <li>
                            <a href="#">
                                <img src="https://res.vmallres.com/pimages//display/10086199502267/78_78_b_web537197B2330AF927EFB928EC9F0021085B62243B6E2D809E.jpg" alt="">
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <img src="https://res.vmallres.com/pimages//display/10086199502267/78_78_b_web537197B2330AF927EFB928EC9F0021085B62243B6E2D809E.jpg" alt="">
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <img src="https://res.vmallres.com/pimages//display/10086199502267/78_78_b_web537197B2330AF927EFB928EC9F0021085B62243B6E2D809E.jpg" alt="">
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <img src="https://res.vmallres.com/pimages//display/10086199502267/78_78_b_web537197B2330AF927EFB928EC9F0021085B62243B6E2D809E.jpg" alt="">
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <img src="https://res.vmallres.com/pimages//display/10086199502267/78_78_b_web537197B2330AF927EFB928EC9F0021085B62243B6E2D809E.jpg" alt="">
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <img src="https://res.vmallres.com/pimages//display/10086199502267/78_78_b_web537197B2330AF927EFB928EC9F0021085B62243B6E2D809E.jpg" alt="">
                            </a>
                        </li>
                    </ul>
                </div>
                <a href="#" class="product-gallery-dis"></a>
            </div>
        </div>
        <div class="glass-right">
            <div class="product-meta">
                <h1 class="mess">HUAWEI nova 8 8GB+128GB 全网通版（亮黑色）</h1>
                <div class="product-slogan">
                <span>10:08限时开售！</span>
                <span>66W华为超级快充，90Hz OLED曲面屏，麒麟985 5G SoC芯片，6400万魅力四摄，<br>纤薄机身，3D石墨烯散热</span>
               </div>       
            </div>
            <!--  -->
            <div class="product-info">
                 <div class="product-info-list clearfix">
                     <label>价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</label>
                     <span class="product-prom-word">
                        <em>￥</em>
                        <span class="nrm">1366.00</span> 
                     </span>
                 </div>
                 <div class="product-prom-item clearfix">
                    <label>促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</label>
                   <div class="product-prom">
                      <div class="product-parts-specially">
                          <em class="tag">一站式换新</em>
                          <div class="product-prom-con">
                            <span class="product-prom-word">以旧换新最高补贴500元 </span>
                        </div>
                      </div>
                      <div class="product-parts-specially">
                        <em class="tag">一站式换新</em>
                        <div class="product-prom-con">
                          <span class="product-prom-word">以旧换新最高补贴500元 </span>
                      </div>
                    </div>
                    <div class="product-parts-specially">
                        <em class="tag">一站式换新</em>
                        <div class="product-prom-con">
                          <span class="product-prom-word">以旧换新最高补贴500元 </span>
                      </div>
                    </div>
                   </div>
                   
                 </div>
               
            </div>
            <!--  -->
            <div class="hr"></div>
            <!-- 商品介绍 -->
            <div class="product-description">
                <label>服务说明</label>
                <div class="f1">
                    <ul class="product-description-list">
                        <li>已满48元已免运费</li>
                        <li>已满48元已免运费</li>
                        <li>已满48元已免运费</li>
                        <li>已满48元已免运费</li>
                    </ul>
                </div>
            </div>
            <div class="product-description">
                <label>服务说明</label>
                <div class="f1">
                    <ul class="product-description-list">
                        <li>已满48元已免运费</li>
                        <li>已满48元已免运费</li>
                        <li>已满48元已免运费</li>
                        <li>已满48元已免运费</li>
                    </ul>
                </div>
            </div>
            <!--  -->
            <div class="hr1"></div>
            <div class="line"></div>
            <div class="hr1"></div>
            <div class="pro-skus">
                <dl class="product-choose clearfix">
                    <label >选择颜色</label>
                    <div class="product-choose-detail ">
                        <ul>
                            <li>
                                <div class="sku">
                                    <a href="#">
                                        <img src="https://res.vmallres.com/pimages//product/6901443381494/40_40_EE0830231483A4C3B1D7CAB975049B85AEEE2B6CAE79B1A7mp.png" alt="">
                                        <p><span>亮黑色</span></p>
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="sku">
                                    <a href="#">
                                        <img src="https://res.vmallres.com/pimages//product/6901443381494/40_40_EE0830231483A4C3B1D7CAB975049B85AEEE2B6CAE79B1A7mp.png" alt="">
                                        <p><span>亮黑色</span></p>
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="sku">
                                    <a href="#">
                                        <img src="https://res.vmallres.com/pimages//product/6901443381494/40_40_EE0830231483A4C3B1D7CAB975049B85AEEE2B6CAE79B1A7mp.png" alt="">
                                        <p><span>亮黑色</span></p>
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="sku">
                                    <a href="#">
                                        <img src="https://res.vmallres.com/pimages//product/6901443381494/40_40_EE0830231483A4C3B1D7CAB975049B85AEEE2B6CAE79B1A7mp.png" alt="">
                                        <p><span>亮黑色</span></p>
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="sku">
                                    <a href="#">
                                        <img src="https://res.vmallres.com/pimages//product/6901443381494/40_40_EE0830231483A4C3B1D7CAB975049B85AEEE2B6CAE79B1A7mp.png" alt="">
                                        <p><span>亮黑色</span></p>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                </dl>
                <dl class="product-choose clearfix">
                    <label >选择版本</label>
                    <div class="product-choose-detail ">
                        <ul>
                            <li>
                                <div class="sku">
                                    <a href="#">
                                       
                                        <p><span>5G全网通 8GB+128GB</span></p>
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="sku">
                                    <a href="#"  class="inp">
                                        <p><span>5G全网通 8GB+256GB</span></p>
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="sku">
                                    <a href="#">
                                     
                                        <p><span>5G全网通 8GB+512GB</span></p>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                </dl>
                <dl class="product-choose clearfix">
                    <label >选择套餐</label>
                    <div class="product-choose-detail ">
                        <ul>
                            <li>
                                <div class="sku">
                                    <a href="#">
                                       
                                        <p><span>官方标配</span></p>
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                    
                </dl>
                <dl class="product-choose clearfix">
                    <label >增值业务</label>
                    <div class="product-choose-detail ">
                        <ul>
                            <li>
                                <div class="sku">
                                    <a href="#">
                                       
                                        <p><span>无增值服务</span></p>
                                    </a>
                                </div>
                            </li>
                            <li>
                                <div class="sku">
                                    <a href="#"  class="inp">
                                        <p><span>华为礼品包装服务（礼品封套+明信片）</span></p>
                                    </a>
                                </div>
                            </li>
                           
                        </ul>
                    </div>
                    
                </dl>
            </div>
            <!-- 商品数量 -->
            <div class="product-operation">
                <div class="product-stock">
                    <input type="text" placeholder="1" value="1" class="product-stock-text">
                    <p class="product-stock-btn">
                        <a href="#" id="disabled">+</a>
                        <a href="#" id="disableb">-</a>
                    </p>
                </div>
                <div class="pro-operation">
                    <a href="#">立即申购</a>
                </div>
                <div class="countdown clearfix">
                    <span id="t1">00</span>
                    <i>:</i>
                    <span id="t2">00</span>
                    <i>:</i>
                    <span id="t3">00</span>
                </div>
            </div>
        </div>
    </div>
    <script src="../js/public.js"></script>
    <script src="../js/jquery1.12.4.min.js"></script>
<script>
     //获取相关元素
    var box=document.getElementById('glass')//总容器
	var small=document.querySelector('.glass-img')//小图片所在的盒子
	var mask=document.querySelector('.glass-zomm-lens')//遮罩层
	var big=document.querySelector('.glass-zoom-big')//大图片所在的盒子
	var bigImg=document.querySelector('.bigimg')
    //1 鼠标移入small,big显示,mask显示
    small.onmouseover=function(){
		   big.style.display="block";
		   mask.style.display="block"
	   }
     //2 mask跟着鼠标移动，鼠标在mask中心位置
     small.onmousemove=function(e){
            e=e||window.event;
			var left = e.clientX+getScroll().left - box.offsetLeft;
			var top = e.clientY+getScroll().top-box.offsetTop;
			// 鼠标在mask中心，减去mask宽高的一半
			left = left-mask.offsetWidth/2;
			top = top-mask.offsetHeight/2;
			//边界处理
			if(left<0){
				left=0
			}
			if(top<0){
				top=0
			}
			if(left>small.offsetWidth-mask.offsetWidth){
				left=small.offsetWidth-mask.offsetWidth
			}
			if(top>small.offsetHeight-mask.offsetHeight){
				top=small.offsetHeight-mask.offsetHeight
			}
			//定位元素
			mask.style.left=left+'px';
			mask.style.top=top+'px';
		   //3 mask对应的大图位置显示
		   var x=left/small.offsetWidth*bigImg.offsetWidth;
		   var y=top/small.offsetHeight*bigImg.offsetHeight;
		    bigImg.style.marginLeft = -x+"px";
			bigImg.style.marginTop = -y+"px";
	   }
	   //4 鼠标移出small,big隐藏,mask隐藏
	   small.onmouseout=function(){
		   big.style.display="none"
		   mask.style.display="none"
	   }
    //秒杀功能倒计时
    function toTime(){
        var time=new Date() //当前时间
        var data=new Date().getTime()//当前时间戳
        var date=new Date('2021','1','8','8','8','20').getTime();
        var times=(date-data)/1000;
        var hour=parseInt(times/60/60%24);
        $id('t1').innerHTML=hour;
        var minute=parseInt(times/60%60)
        if(minute<10){
            $id('t2').innerHTML="0"+minute;
        }else{
            $id('t2').innerHTML=minute;
        }
        var seconds = parseInt(times%60)
        if(seconds<10){
            $id('t3').innerHTML="0"+seconds;
        }else{
            $id('t3').innerHTML=seconds;
        }
    }
    toTime()
    setInterval(toTime,1000)
//  购物车
    $('.pro-operation').on('click',function(){
       var num=parseInt($('.product-stock-text').val());
       var price=parseInt($('.nrm').text())
       //总价
       var total=num*price;
      var image=$('.arr').attr('src');
      var code=$('.glass-img').attr('code')
      var mess=$('.mess').text()
      console.log(image,code,num,price,mess)
      //将数据存储
      var message={
          code:code,
          image:image,
          message:mess,
          price:price,
          num:num,
          total:total,
      };alert('添加购物车成功')
      var goods=[];
      if(localStorage.getItem('goods')){
          goods=JSON.parse(localStorage.getItem('goods'));
          console.log(goods)
          var falg=true;
          goods.forEach(function(item,index){
              if(message.code==item.code){
                  message.num=message.num+item.num;
                  message.total=message.total+item.total;
                   goods.splice(index,1,message);
                   goods=JSON.stringify(goods);
                   localStorage.setItem('goods',goods);
                   falg=false;
                   return;
          }});
          if(falg){
               //此时goods里面没有这个商品
           goods.push(message);
           goods=JSON.stringify(goods);
           localStorage.setItem('goods',goods);
          }          
       }else{
          goods.push(message);
          goods=JSON.stringify(goods);
          localStorage.setItem('goods',goods);
       }
        return false;
        
    })
</script>
</body>
</html>
